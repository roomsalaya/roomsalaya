import{r as i,j as t,U as m,V as x,a6 as j,C as S,D as k,E as u,a4 as c,X as w,S as D,a7 as E,F as C,G as b}from"./index-DjzIDbOK.js";const I=()=>{const[p,d]=i.useState([]),[f,l]=i.useState(!0),y=async()=>{l(!0);try{const a=(await S(k(u,"paymentProofs202"))).docs.map(n=>{const e=n.data();return{key:n.id,item:e.invoice,detail:t.jsx(t.Fragment,{children:e.imageUrl?t.jsx("img",{src:e.imageUrl,alt:"Proof",style:{maxWidth:"200px"}}):"ไม่พบภาพ"}),status:e.status}});d(a)}catch(s){console.error("Error fetching data: ",s),c.error("เกิดข้อผิดพลาดในการดึงข้อมูล")}finally{l(!1)}};i.useEffect(()=>{y()},[]);const h=async(s,a)=>{const n=a==="pending"?"approved":"pending",e=C(u,"paymentProofs202",s);try{await b(e,{status:n}),d(o=>o.map(r=>r.key===s?{...r,status:n}:r)),c.success("สถานะอัปเดตสำเร็จ")}catch(o){console.error("Error updating status: ",o),c.error("เกิดข้อผิดพลาดในการอัปเดตสถานะ")}},g=[{title:"รายการที่เลือก",dataIndex:"item",key:"item"},{title:"รายละเอียด",dataIndex:"detail",key:"detail"},{title:"การดำเนินการ",key:"action",render:(s,a)=>t.jsx(w,{type:"default",icon:a.status==="pending"?t.jsx(D,{}):t.jsx(E,{}),style:{backgroundColor:a.status==="pending"?"#f0f9eb":"#f4f4f4",color:a.status==="pending"?"#52c41a":"#faad14"},onClick:()=>h(a.key,a.status),children:a.status==="pending"?"อนุมัติชำระ":"รออนุมัติชำระ"})}];return t.jsxs("div",{className:"payment-history-container",children:[t.jsx("h3",{children:"ประวัติแจ้งชำระค่าเช่า"}),t.jsx(m,{direction:"vertical",size:"middle",style:{width:"100%"},children:t.jsx(x,{title:"รายละเอียดการชำระเงิน",children:t.jsx(j,{columns:g,dataSource:p,pagination:!1,loading:f})})})]})};export{I as default};
